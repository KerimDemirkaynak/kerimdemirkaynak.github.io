document.addEventListener('DOMContentLoaded', () => {
    
    // 1. FOOTER YIL AYARI
    const yearSpan = document.getElementById('year');
    if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
    }

    // 2. MOBİL MENÜ AYARI
    const menuToggle = document.getElementById('menuToggle');
    const navbar = document.getElementById('navbar');

    if (menuToggle && navbar) {
        menuToggle.addEventListener('click', () => {
            navbar.classList.toggle('active');
            // Menü açıldığında ikonu çarpı yapalım mı? İsteğe bağlı
            const icon = menuToggle.querySelector('i');
            if (navbar.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        });
    }

    // 3. TEMA VE DİL YÖNETİMİ
    const themeBtn = document.getElementById('theme-btn');
    const langBtn = document.getElementById('lang-btn');
    const themeIcon = themeBtn ? themeBtn.querySelector('i') : null;

    // Kayıtlı ayarları yükle
    const savedTheme = localStorage.getItem('theme') || 'dark';
    const savedLang = localStorage.getItem('lang') || 'tr';

    applyTheme(savedTheme);
    applyLang(savedLang);

    // Tema Değiştirme
    if (themeBtn) {
        themeBtn.addEventListener('click', () => {
            const isLight = document.body.classList.contains('light-mode');
            const newTheme = isLight ? 'dark' : 'light';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        });
    }

    // Dil Değiştirme
    if (langBtn) {
        langBtn.addEventListener('click', () => {
            const currentLangText = langBtn.textContent;
            const newLang = currentLangText === 'TR' ? 'en' : 'tr';
            applyLang(newLang);
            localStorage.setItem('lang', newLang);
        });
    }

    // Yardımcı Fonksiyon: Tema Uygula
    function applyTheme(theme) {
        if (theme === 'light') {
            document.body.classList.add('light-mode');
            if(themeIcon) themeIcon.className = 'fas fa-sun';
        } else {
            document.body.classList.remove('light-mode');
            if(themeIcon) themeIcon.className = 'fas fa-moon';
        }
    }

    // Yardımcı Fonksiyon: Dil Uygula
    function applyLang(lang) {
        if(langBtn) langBtn.textContent = lang === 'tr' ? 'TR' : 'EN';
        
        // Data-lang attribute'una sahip tüm elementleri bul
        document.querySelectorAll('[data-lang]').forEach(el => {
            const key = el.getAttribute('data-lang');
            if (translations[lang] && translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });

        // Input Placeholderlarını Güncelle
        if (translations[lang]) {
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const msgInput = document.getElementById('message');

            if(nameInput) nameInput.placeholder = translations[lang].name_placeholder;
            if(emailInput) emailInput.placeholder = translations[lang].email_placeholder;
            if(msgInput) msgInput.placeholder = translations[lang].msg_placeholder;
        }
    }
});

// Çeviri Sözlüğü
const translations = {
    tr: {
        home: "Ana Sayfa",
        about: "Hakkında",
        contact: "İletişim",
        bio_short: "Tasarımcı, Anime Sever ve İçerik Üreticisi",
        projects: "Projelerim",
        blog: "Blogum",
        rights: "Tüm Hakları Saklıdır.",
        name_placeholder: "Adınız Soyadınız",
        email_placeholder: "E-posta Adresiniz",
        msg_placeholder: "Mesajınızı buraya yazın...",
        send_btn: "Gönder"
    },
    en: {
        home: "Home",
        about: "About",
        contact: "Contact",
        bio_short: "Designer, Anime Lover and Content Creator",
        projects: "My Projects",
        blog: "My Blog",
        rights: "All Rights Reserved.",
        name_placeholder: "Your Name",
        email_placeholder: "Your Email",
        msg_placeholder: "Type your message here...",
        send_btn: "Send Messa
        ge"
    }
};
